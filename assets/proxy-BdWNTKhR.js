import{r as y}from"./index-3zfdHyOq.js";const x=r=>r&&typeof r=="object",P=(r,n)=>{const c={Map:new Set(["set","delete","clear"]),Set:new Set(["add","delete","clear"]),Array:new Set(["push","pop","shift","unshift","splice","sort","reverse","copyWithin","fill"])};return r instanceof Map?c.Map.has(n):r instanceof Set?c.Set.has(n):Array.isArray(r)?c.Array.has(n):!1};function R(r){const n=typeof r=="function"?r():r,c=new Set,l=new WeakMap;let p=0;const f=()=>{p+=1;for(const o of c)o()},i=o=>{if(l.has(o))return l.get(o);const a=new Proxy(o,{get(e,s){const t=Reflect.get(e,s);return typeof t=="function"?P(e,s)?function(...u){const h=Reflect.apply(t,e,u);return f(),h}:t.bind(e):x(t)?i(t):t},set:(e,s,t)=>{const u=Reflect.set(e,s,t);return f(),u},deleteProperty:(e,s)=>{const t=Reflect.deleteProperty(e,s);return f(),t},defineProperty:(e,s,t)=>{const u=Reflect.defineProperty(e,s,t);return f(),u},setPrototypeOf:(e,s)=>{const t=Reflect.setPrototypeOf(e,s);return f(),t},preventExtensions:e=>{const s=Reflect.preventExtensions(e);return f(),s},apply:Reflect.apply,has:Reflect.has,ownKeys:Reflect.ownKeys,getPrototypeOf:Reflect.getPrototypeOf,getOwnPropertyDescriptor:Reflect.getOwnPropertyDescriptor,isExtensible:Reflect.isExtensible,construct:Reflect.construct});return l.set(o,a),a};return{proxy:x(n)?i(n):n,subscribe:o=>(c.add(o),()=>c.delete(o)),getSnapshot:()=>p}}function w(r){const n=y.useMemo(()=>R(r),[]);return y.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot),n.proxy}export{w as u};
